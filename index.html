<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>India Real Estate News – Auto-Aggregated</title>
<style>
 body{font-family:'Segoe UI',Tahoma,Verdana,sans-serif;background:#f8f9fa;margin:0;padding:20px;display:flex;justify-content:center}
 .container{max-width:650px;width:100%}
 .card{background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);margin-bottom:20px;padding:20px;transition:box-shadow .3s}
 .card:hover{box-shadow:0 6px 20px rgba(0,0,0,.15)}
 .title{font-size:18px;font-weight:700;color:#212529;margin-bottom:10px}
 .summary{font-size:14px;color:#495057;margin-bottom:15px;line-height:1.5}
 .date{font-size:12px;color:#868e96}
 .footer{font-size:12px;color:#6c757d;border-top:1px solid #dee2e6;padding-top:12px;margin-top:10px}
 .footer a{color:#0d6efd;text-decoration:none}
 .footer a:hover{text-decoration:underline}
 .error{color:#dc3545;text-align:center;margin-bottom:10px}
 .api-label{font-size:11px;color:#fff;padding:2px 6px;border-radius:4px;margin-right:5px;display:inline-block;vertical-align:middle}
 .gnews{background:#28a745} /* Green for GNews */
 .mediastack{background:#007bff} /* Blue for Mediastack */
 .newsapi{background:#dc3545} /* Red for NewsAPI */
 .fallback{background:#6c757d} /* Gray for Fallback */
</style>
</head>
<body>
<div class="container" id="newsContainer"></div>
<script>
// 1️⃣ Insert your keys here
const keys = {
  newsapi   : 'b2e5424f62294ae49339359f6c76a7a7',
  gnews     : '9dd49b0673e8c206c0851efefcaea92e',
  mediastack: 'f04b77ddf92e5b4d764d3092184270e6'
};

// 2️⃣ Query to focus on India / Bengaluru real-estate
const query = encodeURIComponent('real estate Bengaluru India');

// 3️⃣ Build endpoint URLs
const endpoints = [
  {
    name: 'GNews',
    url : `https://gnews.io/api/v4/search?q=${query}&lang=en&country=in&max=4&apikey=${keys.gnews}`
  },
  {
    name: 'Mediastack',
    url : `https://api.mediastack.com/v1/news?access_key=${keys.mediastack}&countries=in&languages=en&limit=4&keywords=${query}`
  },
  {
    name: 'NewsAPI',
    url : `https://newsapi.org/v2/everything?q=${query}&language=en&apiKey=${keys.newsapi}&pageSize=4`
  }
];

// 4️⃣ Fallback stories (manual)
const fallbackStories = [
  {
    title  : 'Welspun One Acquires 107 Acres in Bengaluru for Warehousing Expansion',
    summary: 'Welspun One Logistics Parks acquired 51 acres in Hoskote and 56 acres in Devanahalli, Bengaluru, with a $250 million investment to develop warehousing space.',
    date   : '2025-08-20',
    url    : 'https://www.hindustantimes.com/real-estate/welspun-one-acquires-107-acres-in-bengaluru-to-expand-warehousing-footprint-in-south-india-101755704549777.html',
    api    : 'Fallback'
  },
  {
    title  : 'Aawas Yojana Mission to Unlock Idle Housing Inventory',
    summary: 'Government initiative aims to unlock ₹5 lakh crore of idle housing by 2030, creating 1.5 crore jobs and ₹30,000 crore in revenues.',
    date   : '2025-08-24',
    url    : 'https://www.einpresswire.com/calendar/2025/08/24',
    api    : 'Fallback'
  }
];

// 5️⃣ Fetch helper
async function fetchJSON(endpoint){
  try{
    const res = await fetch(endpoint.url);
    if(!res.ok) throw new Error(`${endpoint.name} → ${res.status}`);
    return {api:endpoint.name,data:await res.json()};
  }catch(e){
    console.warn(e.message);
    return {api:endpoint.name,error:e.message};
  }
}

// 6️⃣ Normalise to common shape
function toStory(api,raw){
  switch(api){
    case 'GNews':
      return {title:raw.title,summary:raw.description,date:raw.publishedAt?.slice(0,10),url:raw.url,api};
    case 'Mediastack':
      return {title:raw.title,summary:raw.description,date:raw.published_at?.slice(0,10),url:raw.url,api};
    case 'NewsAPI':
      return {title:raw.title,summary:raw.description,date:raw.publishedAt?.slice(0,10),url:raw.url,api};
    default: return null;
  }
}

// 7️⃣ Merge + dedupe (by lowercase title)
function mergeStories(responses){
  const seen = new Set();
  const stories = [];
  responses.forEach(r=>{
    if(r.data && r.data.articles){
      r.data.articles.forEach(a=>{
        const st = toStory(r.api,a);
        if(st && !seen.has(st.title.toLowerCase())){
          seen.add(st.title.toLowerCase());
          stories.push(st);
        }
      });
    }else if(r.data && r.data.data){ // mediastack
      r.data.data.forEach(a=>{
        const st = toStory(r.api,a);
        if(st && !seen.has(st.title.toLowerCase())){
          seen.add(st.title.toLowerCase());
          stories.push(st);
        }
      });
    }
  });
  return stories;
}

// 8️⃣ Render cards
function render(list,isFallback=false){
  const c = document.getElementById('newsContainer');
  c.innerHTML = isFallback ? '<p class=\"error\">All APIs failed – showing last saved news.</p>' : '';
  list.forEach(s=>{
    const card = document.createElement('div');
    card.className='card';
    const apiClass = s.api.toLowerCase().replace(/\s+/g,'');
    card.innerHTML = `
      <div class=\"title\">${s.title}</div>
      <div class=\"summary\">${s.summary||'No summary available.'}</div>
      <div class=\"date\">Date: ${s.date||'—'}</div>
      <div class=\"footer\">
        <span class=\"api-label ${apiClass}\">From: ${s.api}</span>
        <a href=\"${s.url}\" target=\"_blank\" rel=\"noopener\">Read full article</a>
      </div>
    `;
    c.appendChild(card);
  });
}

// 9️⃣ Main
Promise.all(endpoints.map(fetchJSON))
  .then(res => {
    const merged = mergeStories(res);
    if(merged.length) render(merged.slice(0,12));
    else render(fallbackStories,true);
  })
  .catch(()=>render(fallbackStories,true));
</script>
</body>
</html>
